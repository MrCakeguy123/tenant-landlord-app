{% extends "base.html" %}
{% block content %}
  <section class="card">
    <h1>{{ t('leases_title') }}</h1>
    <p>
      <a class="button" href="{{ url_for('landlord_dashboard') }}">{{ t('back_to_dashboard') }}</a>
      <a class="button primary" href="{{ url_for('landlord_new_lease') }}">{{ t('leases_new') }}</a>
    </p>

    {% if leases %}
      <div class="table-wrapper">
      <table class="table">
        <thead>
          <tr>
            <th>{{ t('col_tenant') }}</th>
            <th>{{ t('col_monthly_rent') }}</th>
            <th>{{ t('col_due_day') }}</th>
            <th>{{ t('leases_start_date') }}</th>
            <th>{{ t('leases_end_date') }}</th>
            <th>{{ t('leases_active') }}</th>
            <th>{{ t('leases_toggle') }}</th>
          </tr>
        </thead>
        <tbody>
          {% for l in leases %}
            <tr>
              <td>{{ l.tenant_name or l.tenant_username }}</td>
              <td>${{ '%.2f'|format(l.monthly_rent or 0) }}</td>
              <td>{{ l.due_day }}</td>
              <td>{{ l.start_date or '' }}</td>
              <td>{{ l.end_date or '' }}</td>
              <td>{% if l.is_active %}{{ t('yes') }}{% else %}{{ t('no') }}{% endif %}</td>
              <td>
                <form method="post" action="{{ url_for('landlord_toggle_lease', lease_id=l.id) }}">
                  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                  <button class="button small" type="submit">
                    {% if l.is_active %}{{ t('announcements_deactivate') }}{% else %}{{ t('announcements_activate') }}{% endif %}
                  </button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      </div>
    {% else %}
      <p>{{ t('leases_none') }}</p>
    {% endif %}
  </section>
{% endblock %}
