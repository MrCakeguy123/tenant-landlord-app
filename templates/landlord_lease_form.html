{% extends "base.html" %}
{% block content %}
  <section class="card">
    {% if lease %}
      <h1>Edit lease</h1>
      <p class="subtitle">
        Tenant:
        <strong>{{ lease.tenant_name or lease.tenant_username }}</strong>
      </p>
    {% else %}
      <h1>New lease</h1>
    {% endif %}

    <form method="post" class="form">
      {% if not lease %}
        <label>
          Tenant
          <select name="tenant_id" required>
            <option value="">Select tenant</option>
            {% for t in tenants %}
              <option value="{{ t.id }}">{{ t.full_name or t.username }} ({{ t.username }})</option>
            {% endfor %}
          </select>
        </label>
      {% endif %}

      <label>
        Monthly rent
        <input type="number" step="0.01" name="monthly_rent"
               value="{{ lease.monthly_rent if lease else '' }}" required>
      </label>

      <label>
        Due day (1â€“28)
        <input type="number" name="due_day"
               value="{{ lease.due_day if lease else '1' }}" min="1" max="28" required>
      </label>

      <label>
        Start date (optional)
        <input type="date" name="start_date" value="{{ lease.start_date if lease and lease.start_date else '' }}">
      </label>

      <label>
        End date (optional)
        <input type="date" name="end_date" value="{{ lease.end_date if lease and lease.end_date else '' }}">
      </label>

      <label>
        <input type="checkbox" name="is_active"
               {% if lease is none or lease.is_active %}checked{% endif %}>
        Lease is active
      </label>

      <button class="button primary" type="submit">
        {% if lease %}Save changes{% else %}Create lease{% endif %}
      </button>
      <a class="button" href="{{ url_for('landlord_leases') }}">Cancel</a>
    </form>
  </section>
{% endblock %}
